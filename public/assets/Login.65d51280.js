import{u as k,z as y,j as u,r as p,o as _,c as h,b as s,k as i,l as f,a as c,w as b,m as V,d as w}from"./vendor.0b20d460.js";import{_ as x,a as U,b as j}from"./FlashMessage.84c4b894.js";import{A as $,g as A}from"./index.744f18bf.js";const E=["onSubmit"],F={class:"flex justify-between"},N=w(" Forgot your password? "),R={setup(g){const m=k(),l=y();let e=u(null),o=u(null),n=u(null);async function v(){n.value=null;const d={email:e.value,password:o.value};try{if(await $.login(d),await l.dispatch("auth/getAuthUser"))l.dispatch("auth/setGuest",{value:"isNotGuest"}),m.push({name:"Dashboard"});else{const r=Error("Unable to fetch user after login, check your API settings.");throw r.name="Fetch User",r}}catch(t){n.value=A(t)}}return(d,t)=>{const r=p("router-link");return _(),h("form",{onSubmit:V(v,["prevent"])},[s(x,{type:"email",label:"Email",name:"email",modelValue:i(e),"onUpdate:modelValue":t[0]||(t[0]=a=>f(e)?e.value=a:e=a),autocomplete:"email",placeholder:"Your email",class:"mb-2"},null,8,["modelValue"]),s(x,{type:"password",label:"Password",name:"password",modelValue:i(o),"onUpdate:modelValue":t[1]||(t[1]=a=>f(o)?o.value=a:o=a),placeholder:"Your password",class:"mb-4"},null,8,["modelValue"]),c("div",F,[s(U,{type:"submit",text:"Login"}),s(r,{to:{name:"ForgotPassword"},class:"text-sm base-link"},{default:b(()=>[N]),_:1})]),s(j,{error:i(n)},null,8,["error"])],40,E)}}},S={class:"max-w-sm p-5 m-auto"},B=c("h2",{class:"mb-4 text-xl font-bold text-center"},"Login",-1),P={class:"mt-2 text-center text-gray-500"},C=w(" Register for an account "),Y={setup(g){return(m,l)=>{const e=p("router-link");return _(),h("div",S,[B,s(R,{class:"p-5 bg-white border rounded shadow"}),c("p",P,[s(e,{to:{name:"Register"},class:"text-pink-500 transition hover:text-pink-600"},{default:b(()=>[C]),_:1})])])}}};export{Y as default};
