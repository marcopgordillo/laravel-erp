import{r as _,o as p,c as f,a as y,b as l,w as g,d as h,F as S,e as L,f as P,g as O,h as b,i as T}from"./vendor.0b20d460.js";const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};I();var m=(e,t)=>{for(const[o,s]of t)e[o]=s;return e};const N={},U={class:"m-10"},D=h("Home"),k=h("About");function V(e,t){const o=_("router-link");return p(),f("nav",null,[y("ul",U,[l(o,{to:{name:"Home"}},{default:g(()=>[D]),_:1}),l(o,{to:{name:"About"}},{default:g(()=>[k]),_:1})])])}var F=m(N,[["render",V]]);const G={setup(e){return(t,o)=>{const s=_("router-view");return p(),f(S,null,[l(F),l(s)],64)}}},$="modulepreload",E={},j="/",c=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${j}${s}`,s in E)return;E[s]=!0;const r=s.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":$,r||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),r)return new Promise((w,R)=>{u.addEventListener("load",w),u.addEventListener("error",R)})})).then(()=>t())},x={};function q(e,t){return p(),f("h1",null,"Home page")}var C=m(x,[["render",q]]);const H=()=>c(()=>import("./NotFound.50e2ae43.js"),[]),B=()=>c(()=>import("./About.7f60da40.js"),["assets/About.7f60da40.js","assets/vendor.0b20d460.js"]),W=()=>c(()=>import("./Dashboard.290e07f4.js"),["assets/Dashboard.290e07f4.js","assets/vendor.0b20d460.js"]),K=()=>c(()=>import("./Register.c65ed8d0.js"),["assets/Register.c65ed8d0.js","assets/vendor.0b20d460.js","assets/FlashMessage.84c4b894.js"]),M=()=>c(()=>import("./Login.65d51280.js"),["assets/Login.65d51280.js","assets/vendor.0b20d460.js","assets/FlashMessage.84c4b894.js"]),Q=()=>c(()=>import("./ForgotPassword.08dafc65.js"),[]);var z=[{path:"/",name:"Home",component:C},{path:"/dashboard",name:"Dashboard",meta:{requiresAuth:!0},component:W},{path:"/about",name:"About",component:B},{path:"/register",name:"Register",component:K},{path:"/login",name:"Login",component:M},{path:"/forgot-password",name:"ForgotPassword",component:Q},{path:"/:catchAll(.*)",name:"NotFound",component:H}];const A=e=>{const t="API Error, please try again!";return e.name==="Fetch User"?e.message:e.response?e.response.data&&e.response.data.errors?e.response.data.errors:t:(console.error(`API ${e.config.url} not found`),t)},a=L.create({baseURL:"http://laravel.test",withCredentials:!0});a.interceptors.response.use(e=>e,e=>(console.log(e),e.response&&[401,419].includes(e.response.status)&&i.getters["auth/authUser"]&&!i.getters["auth/guest"]&&i.dispatch("auth/logout"),Promise.reject(e)));var v={async login(e){return await a.get("/sanctum/csrf-cookie"),a.post("/login",e)},logout(){return a.post("/logout")},async forgotPassword(e){await a.get("/sanctum/csrf-cookie"),await a.post("/forgot-password",e)},getAuthUser(){return a.get("/api/user")},async resetPassword(e){return await a.get("/sanctum/csrf-cookie"),a.post("/reset-password",e)},updatePassword(e){return a.put("/user/password",e)},async registerUser(e){return await a.get("/sanctum/csrf-cookie"),a.post("/register",e)},sendVerification(e){return a.post("/email/verification-notification",e)},updateUser(e){return a.put("/user/profile-information",e)}};const J=()=>({user:null,loading:!1,error:null}),X={SET_USER(e,t){e.user=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t}},Y={authUser:e=>e.user,isAdmin:e=>e.user?e.user.isAdmin:!1,error:e=>e.error,loading:e=>e.loading,loggedIn:e=>!!e.user,guest:()=>{const e=window.localStorage.getItem("guest");if(!e)return!1;if(e==="isGuest")return!0;if(e==="isNotGuest")return!1}},Z={logout({commit:e,dispatch:t}){return v.logout().then(()=>{e("SET_USER",null),t("setGuest",{value:"isGuest"}),d.currentRoute.name!=="login"&&d.push({name:"login"})}).catch(o=>e("SET_ERROR",A(o)))},async getAuthUser({commit:e}){e("SET_LOADING",!0);try{const t=await v.getAuthUser();return e("SET_USER",t.data.data),e("SET_LOADING",!1),t.data.data}catch(t){e("SET_LOADING",!1),e("SET_USER",null),e("SET_ERROR",A(t))}},setGuest(e,{value:t}){window.localStorage.setItem("guest",t)}};var ee={namespace:!0,state:J,mutations:X,getters:Y,actions:Z},i=P({strict:{}.NODE_ENV!=="production",modules:{auth:ee},state(){return{}},mutations:{},getters:{},actions:{}});const d=O({history:b("/"),routes:z});d.beforeEach((e,t,o)=>{const s=i.getters["auth/authUser"],r=e.matched.some(u=>u.meta.requiresAuth),n={path:"/login",query:{redirect:e.fullPath}};r&&!s?i.dispatch("auth/getAuthUser").then(()=>{i.getters["auth/authUser"]?o():o(n)}):o()});const te=T(G).use(i).use(d);te.mount("#app");export{v as A,m as _,A as g};
